<!--
  ~ Copyright (c) 2016 BreizhCamp
  ~ [http://breizhcamp.org]
  ~
  ~ This file is part of CFP.io.
  ~
  ~ CFP.io is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="row">
	<div class="panel">
		<div class="panel-body">
			<h1>{{'owner.config' | translate}}</h1>
            <form  id="confForm" name="form" xt-form role="form" novalidate>
            <div class="form-group" bs-has verify="verify">
                <div class="togglebutton">
                    <label>{{'admin.allowSubmissions' | translate}}
                        <input type="checkbox" checked="submission" ng-model="config.open" >
                    </label>
                </div>
            </div>
            <div class="form-group" bs-has verify="verify">
                <label for="eventName">{{'admin.eventName' | translate}}
                    <input required type="text" name="eventName" ng-class="{'ng-verify' : verify}" class="form-control" id="eventName" ng-model="config.eventName">
                </label>
            </div>
            <div class="form-group" bs-has verify="verify">
                <label for="shortDescription">{{'admin.shortDescription' | translate}}
                    <input required type="text" name="shortDescription" ng-class="{'ng-verify' : verify}" class="form-control" id="shortDescription" ng-model="config.shortDescription">
                </label>
            </div>
            <div class="form-group" bs-has verify="verify">
                <label  for="start">{{'admin.startDate' | translate}}
                    <input required  type="date" name="start" ng-class="{'ng-verify' : verify}" class="form-control" id="start" value="{{ config.start | date: 'yyyy-MM-dd' }}" ng-model="config.start">
                </label>
            </div>
            <div class="form-group" bs-has verify="verify">
                <label  for="duration">{{'admin.duration' | translate}}
                    <input required  type="number" name="duration" ng-class="{'ng-verify' : verify}" class="form-control" id="duration" value="{{ config.duration }}" ng-model="config.duration">
                </label>
            </div>

            <div class="form-group" bs-has verify="verify">
                <label  for="decision">{{'admin.decisionDate' | translate}}
                    <input required type="date" name="decision" ng-class="{'ng-verify' : verify}" class="form-control" id="decision" value="{{ config.decision | date: 'yyyy-MM-dd' }}" ng-model="config.decision">
                </label>

            </div>
            <div class="form-group" bs-has verify="verify">
                <label  for="release">{{'admin.releaseDate' | translate}}
                    <input required type="date" name="release" ng-class="{'ng-verify' : verify}" class="form-control" id="release" value="{{ config.release | date: 'yyyy-MM-dd' }}" ng-model="config.release">
                </label>
            </div>
            <div class="form-group" bs-has verify="verify">
                <label  for="logo">{{'logo' | translate}}
                    <input required type="text" name="logo" ng-class="{'ng-verify' : verify}" class="form-control" id="logo" value="{{ config.logo }}" ng-model="config.logo">
                    <img ng-src="{{ config.logo }}"/>
                </label>
            </div>
                <div class="form-group" bs-has verify="verify">
                    <label  for="contact">Contact e-mail</label>
                    <input required type="email" name="contact" ng-class="{'ng-verify' : verify}" class="form-control" id="contact" value="{{ config.contact }}" ng-model="config.contact">

                </div>


            </form>
            <button ng-click="saveConfig()" ng-disabled="sending" class="btn btn-block btn-primary">
                <span class="mdi-content-save pull-right" ng-class="{'glyphicon-refresh-animate' : sending, 'mdi-content-save' : !sending, 'mdi-navigation-refresh' : sending}"></span>
                {{'admin.btn.save' | translate}}
            </button>
		</div>
	</div>
</div>

<div class="row">
    <div class="panel" style="background: red">
        <div class="panel-body">
            <h4><i class="ion-ios-flame"></i> Danger zone</h4>
            <input type="checkbox" value="unlock" id="unlock" ng-change="unlock()" ng-model="unlocked"> <label for="unlock"> I understand what I'm doing</label>
            <button class="btn btn-block btn-danger" ng-click="reset()" ng-if="unlocked">Reset CFP to initial state</button>
        </div>
    </div>
</div>
